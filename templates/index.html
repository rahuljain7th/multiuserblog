<!DOCTYPE html>
<html>
    <head>
        <title>Blogger</title>
        <link rel="stylesheet" type="text/css" href="../css/style.css">
         <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
         <script type="text/javascript" src="../js/blog.js"></script>
    </head>
    <body>
        <header class="text-center">
        <div class="logo">
            <h1>Blogger</h1>
            <p>(skills used : python,jinja2,googleDataStore,googleAppEngine)</p>
            </div>

            <div class="userform">
            {% if not username %}
            <form method="GET" action="/blog/signup">
            <input class="inputarea button" type="submit" value="Sign Up">
            </form>


            <form method="GET" action="/blog/login">
            <input class="inputarea button" type="submit" value="Login">
            </form>
            {% else %}
             <h2>Welcome {{username}}</h2>
            <form method="GET" action="/blog/myblogs">
            <input class="inputarea button" type="submit" value="My Blogs">
            </form>
            <form method="GET" action="/blog/logout">
            <input class="inputarea button" type="submit" value="Logout">
            </form>
            {% endif %}
            {% if username %}
                <form action="/blog/newpost">
                <input class="inputarea button" type="submit" value="Post New Blog">
                </form>
                {% endif %}
            </div>
            <div style="clear: both;"></div>

        </header>
        <div class="container">
                {% for blogData in blogAllData %}
                    <article class="text-center">
                        <div class="blogheader">
                            <h3 class="blogTitle">{{blogData.blogTitle}}</h3>
                            <p class="blogDate">{{blogData.created}}</p>
                            <div style="clear: both;"></div>
                        </div>
                        <div class="blogDescription">
                            {{blogData.blogDescription}}
                        </div>
                          <div class="">
                            Posted by{{blogData.user.username}}
                        </div>
                    </article>
                    {% if blogData.user.username == username %}
                    <form method="GET" action="/blog/editblog">
                    <input type="hidden" name="blogId" value="{{blogData.key().id()}}">
                    <button class="inputarea button" type="submit" value="Edit your Post">Edit your Post</button>
                    </form>
                    {% endif %}
                     {% if blogData.user.username == username %}
                    <form method="POST" action="/blog/deleteblog">
                    <input type="hidden" name="blogId" value="{{blogData.key().id()}}">
                    <button class="inputarea button" type="submit" value="Delete your Post">Delete your Post</button>
                    </form>
                    {% endif %}
                    <div id="likecount-{{blogData.key().id()}}">{{blogData.totallikes}}</div> Likes
                    <div id="errorMsg-{{blogData.key().id()}}"></div>
<a href="#" id="{{blogData.key().id()}}" onclick="increaseLike(this.id);">Like</a>
                      <form action="" onsubmit="postcomment(this); return false;">
                      <!--The Below CommentList retrive the list of comments on pageLoad -->
                    <div class="commentList">
                    {% for comment in blogData.getCommentsofBlog(blogData) %}
                    {{comment.commenttext}}
                    {% endfor %}
                    </div>
                    <div class="postedcomment"></div>
                    <input type="hidden" name="blogId" value="{{blogData.key().id()}}">
                     <textarea class="commentInput" rows="3" cols="50" name="commentText"></textarea>
                     <button class="inputarea button" type="submit" value="Comment">Comment</button>
                    </form>


                {% endfor %}
            <div>
            </body>
        </html>